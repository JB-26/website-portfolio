---
title: "F1 Data Science Project part 5 - analysis with Pandas and Seaborn!"
date: "2022-11-30"
description: "Making bar graphs, linear regression and merging."
image: https://images.unsplash.com/photo-1600244283510-53b0e34e908d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NDR8fGZvcm11bGElMjAxfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=900&q=60
---

![](https://images.unsplash.com/photo-1600244283510-53b0e34e908d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NDR8fGZvcm11bGElMjAxfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=900&q=60)

The season may have ended, but the analysis hasn’t!

Now we have a full set of results, we can look into performing some deeper analysis.

In case you haven’t cloned the repo to play around with the data, view the repo on GitHub [here](https://github.com/JB-26/f1-2022-analysis).

Let’s jump in!

## Average number of points per team

What would be interesting to see is the average number points for each team, across all the races. So let’s do some initial set up work:

```
raceResults = pd.read_csv('data/compiled-data/race-results.csv')
raceResults.head()

avgPoints = pd.DataFrame()
avgPoints = avgPoints.assign(Team = '', AvgPoints = '')
avgPoints.head()
```

At first, I took this approach for finding the average for each time:

```
redBull = raceResults.loc[raceResults['Car'] == 'Red Bull Racing RBPT']
redBull.head()
redBull['PTS'].mean()
```

And I repeated this for the Ferrari team, as well as Red Bull.

At this point, I thought to myself; _there must be a better way of doing this!_ And there was!

I decided to create an array of the team names, that is used in a for loop.

```
teamNameArray = ['Ferrari', 'Red Bull Racing RBPT', 'Mercedes', 'McLaren Mercedes', 'Alpine Renault', 'Alfa Romeo Ferrari', 'AlphaTauri RBPT', 'Williams Mercedes', 'Aston Martin Aramco Mercedes', 'Haas Ferrari']
len(teamNameArray)

for i in teamNameArray:
    testRes = round(raceResults.loc[raceResults['Car'] == i]['PTS'].mean(), 2)
    avgPoints.loc[-1] = [i, testRes]
    avgPoints.index = avgPoints.index + 1

avgPoints.sort_values(by='AvgPoints', inplace=True, ascending=False)
```

The loop is interesting as it uses the ‘round’ function when formatting the average calculated from Pandas. Setting it to 2 decimal places seemed sensible to me.

The new data is added and the index is shifted at the end of the loop.

With the data ready, let’s visualise the results with [seaborn](https://seaborn.pydata.org/).

```
avgSpeedPlotTeam = sns.barplot(x='Team', y='AvgFastestLap', data=avgFastestLapTeam)
avgSpeedPlotTeam.set_xticklabels(avgSpeedPlotTeam.get_xticklabels(), rotation=45, horizontalalignment='right')
```

IMAGE HERE

It’s clear that Red Bull Racing is in a league of their own. However, what’s interesting is that you can ‘group’ the other teams together. Ferrari and Mercedes are close together, and Alpine and McLaren are close together as well and so on for the other teams.

## The average speed for each of the teams

So, the average points show that Red Bull were clearly performing well throughout the season, but can we say the same for the average speed throughout the season?

The answer, not really. In fact, it was very close!

Let’s build out the data we need:

```
avgSpeedTeam = pd.DataFrame()
avgSpeedTeam = avgSpeedTeam.assign(Team = '', AvgSpeed = '')
avgSpeedTeam.head()

for i in teamNameArray:
    testRes = round(fastestLap.loc[fastestLap['CAR'] == i]['AVG_SPEED'].mean(), 2)
    avgSpeedTeam.loc[-1] = [i, testRes]
    avgSpeedTeam.index = avgSpeedTeam.index + 1

avgSpeedTeam.sort_values(by='AvgSpeed', inplace=True, ascending=False)
```

And let’s build the graph:

```
avgSpeedPlotTeam = sns.barplot(x='Team', y='AvgSpeed', data=avgSpeedTeam)
avgSpeedPlotTeam.set_xticklabels(avgSpeedPlotTeam.get_xticklabels(), rotation=45, horizontalalignment='right')
```

Which shows…

IMAGE HERE

The average speed across the teams are somewhat similar, as opposed to the average number of points across the teams.

## Bonus - Linear Regression

And for a bonus, I decided to create a graph that shows a line of linear regression.
#blog
