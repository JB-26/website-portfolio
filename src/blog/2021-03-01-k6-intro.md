---
title: "An introduction to k6 - a way of automating performance tests ðŸ§ª"
date: "2021-03-01"
---

Recently at work, I've been (trying) to find time to automate several processes such as regression for an area that I've been working on. Whilst planning out what I needed to do etc, a thought popped into my head; "What about performance?"

Performance testing has been an area that I haven't had much experience with and I wanted to add another notch to my bow. So I decided to do some investigations.

There's JMeter, but that's not great. I was looking for something modern and something that could be run in a pipeline.

I stumbled across something called [k6](https://k6.io/). It seemed to tick the boxes I was looking for:
* Scripting in JavaScript
* Open source
* Integrations to services such as Azure, New Relic and Postman
* Up to date documentation

I was intrigued!

Since k6 can run via a CLI, it's possible to run this in a pipeline to automate the performance process entirely. Looks good!

But how easy is it to use?

Well, we're going to find out!

Installing k6 is pretty easy so we'll skip over that, the documentation on k6 goes over that. What we're interested in is scripting and using k6.

In terms of writing scripts, tests are written in JavaScript and the k6 documentation goes into detail of how to write a test.

Let's look at an example

```
import http from 'k6/http';
import { sleep } from 'k6';
export let options = {
  stages: [
    { duration: '30s', target: 20 },
    { duration: '1m30s', target: 10 },
    { duration: '20s', target: 0 },
  ]
};
export default function () {
  http.get('http://test.k6.io');
  sleep(1);
}
```

This test will go to the test k6 website and perform a get request against it, while ramping up the number of virtual users at different stages for 2 minutes and 20 seconds.

Executing this test with k6 in a CLI shows the following results....


...which doesn't easily show how it performed.

So how can we take the data and analyse it?

Thankfully, k6 offers plenty of different ways to output the results of the test. Such as to a CSV or JSON file, New Relic or Data Dog. But for the sake of practice and making a proof of concept, I was looking for something quick and easy to use.

